(function(){function e(){var e=$("#benford_data"),n=$("#nelson_benford"),r=$("figure[data-url]");t(e,e.data("values")),t(n,n.data("values")),r.each(function(){var e=$(this);$.getJSON(e.data("url"),function(n){var r,s;r=$.map(n,function(e){return e[1]}),s=i(r),t(e,s)})})}function t(e,t){n(t);var i=function(){r(e,t)};$(window).resize(i),i()}function n(e){var t={1:.301,2:.176,3:.125,4:.097,5:.079,6:.067,7:.058,8:.051,9:.046};$.each(e,function(e,n){n.push(t[n[0]]||"Benford's Law"),n[0]=n[0].toString()})}function r(e,t){var n=parseInt($("body").css("font-size"),10),r={title:"",vAxis:{title:"Frequency",gridlines:{count:8}},hAxis:{title:"First Digit"},seriesType:"bars",series:{},chartArea:{top:10,left:n*5,width:"70%",height:"65%"},height:e.width()*.65,legend:{position:"bottom"},fontSize:n*.8,fontName:"Georgia",colors:["#999","#FC0"]},i=t[0].length-2;r.series[i]={type:"line",lineWidth:3,curveType:"function"};var s=google.visualization.arrayToDataTable(t),o=new google.visualization.ComboChart(e[0]);o.draw(s,r)}function i(e,t){t=t||{};var n=$.type(e[0])==="string"&&e.shift();digitLabel=t.digitLabel||"Digit",freqLabel=t.freqLabel||n||"Frequency",precision=t.precision||3;var r=e.length,i=0,u=0,a=[[digitLabel,freqLabel]];for(i=1;i<=9;i++)a.push([i,0]);for(i=0;i<r;i++)u=s(e[i]),u&&(a[u][1]+=1);for(i=1;i<=9;i++)a[i][1]=o(a[i][1]/r,precision);return a}function s(e){return parseInt(e.toString().match(/[123456789]/),10)}function o(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}google.load("visualization","1",{packages:["corechart"]}),google.setOnLoadCallback(e)})();